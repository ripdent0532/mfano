<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="icon" href="assets/icon.png" type="image/x-icon">
    <title>首页 - Mfano</title>
</head>
<body>
    <div id="callback"></div>
    <div data-include="component/header"></div>
    <div data-include="component/toast"></div>
    <div class="container" style="margin-top: 3rem;margin-bottom: 1.5rem">
        <div class="row justify-content-evenly">
            <div class="col-md-3">
                <div class="card mb-3">
                    <div class="card-header">搜一搜</div>
                    <div class="card-body ">
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="projectGroup">选择分组</label>
                            <input list="searchGroups" class="form-select" id="searchProjectGroup" style="border-radius: 0.25rem;" />
                            <datalist id="searchGroups"></datalist>
                        </div>
                        <button type="button" class="btn btn-secondary float-end" onclick="search()" style="width: 100%;background: #666699;border-color: #666699;">
                            <span id="queryBtnTxt">去搜</span>
                            <span id="queryAnimation" class="visually-hidden spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
                <div class="card mb-3">
                    <div class="card-header">上传资料</div>
                    <div class="card-body" id="uploadForm">
                        <div class="mb-3">
                            <label for="files" class="form-label">选择压缩文件(.zip)</label>
                            <input id="files" class="form-control" type="file" name="fileName" multiple required>
                        </div>
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="projectGroup">选择分组</label>
                            <input list="groups" class="form-select" id="projectGroup" style="border-radius: 0.25rem;" required />
                            <datalist id="groups"></datalist>
                        </div>
                        <button type="button" onclick="submit()" class="btn btn-secondary float-end" style="width: 100%;background: #666699;border-color: #666699;">
                            <span id="uploadButtonTxt">上传</span>
                            <span id="uploadAnimation" class="visually-hidden spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="list-group list-group-flush col-md-8">
                <table class="table table-hover">
                    <tbody id="projectList"></tbody>
                </table>
            </div>
            <div id="pagination"></div>
        </div>
    </div>

    <script id="projectsTemplate", type="text/x-jquery-tmpl">
        <tr>
            <td><a href="${url}" target="_blank" class="text-decoration-none link-dark" aria-current="true">${name}</a></td>
            <td class="text-end"><span class="badge bg-secondary" style="background-color: #666699!important;">${group}</span></td>
            <td class="text-end">${creator}</td>
            <td class="text-end"><time>${formatDate(created)}</time></td>
        </tr>
    </script>
    <script id="projectGroupTemplate", type="text/x-jquery-tmpl">
        <option data-id="${id}" value="${name}"></option>
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossOrigin="anonymous"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/page.js"></script>
    <script src="js/index.js"></script>
</body>
</html>
